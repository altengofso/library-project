# library-project
[![Django Test Status](https://github.com/altengofso/library-project/actions/workflows/django.yml/badge.svg)](https://github.com/altengofso/library-project/actions/workflows/django.yml)

Веб-приложение на Django, которое реализует функциональность библиотеки книг.

### Демо
http://31.172.72.219/

### Модели базы данных
- Книга (название, автор, год издания, краткое описание, изображение обложки)
- Автор (имя, дата рождения, краткая биография)
- Пользователь (стандартная модель пользователя Django с уникальным почтовым адресом)
- Комментарий (текст комментария, пользователь, книга)
- Рейтинги (оценка, пользователь, книга)

### Реализованная функциональность
- Регистрация/Авторизация пользователей
- Просмотр списка книг с пагинацией
- Поиск книг по названию или автору
  - поиск оптимизирован при помощи индекса GIN
- Просмотр детальной информации о книге c постраничным выводом комментариев к книге
- Просмотр детальной информации об авторе с постраничным выводом книг автора
- Возможность добавлять, редактировать и удалять книги
  - добавлять книги могут все зарегистрированные и авторизованные пользователи (кнопка добавить в шапке)
  - изменять и удалять авторизованные пользователи могут только те книги, которые добавили сами (кнопки изменить и удалить на странице книги)
  - администраторы могут добавлять, изменять и удалять любые книги через интерфейс администратора /admin/
- Возможность просматривать, оставлять и удалять комментарии к книгам
  - оставленные комментарии могут просмотреть все пользователи на странице книги
  - добавить новые комментарии могут зарегистрированные пользователи
  - удалить комментарий может пользователь, оставивший комментарий
  - администратор может управлять любыми комментариями через интерфейс администратора /admin/
- Возможность рейтинга книг пользователем
  - зарегистрированный пользователь может оценить книгу от 1 до 5 на странице книги
  - на странице книги отображается рейтинг книги: средняя оценка книги всеми пользователями
  - на главной странице отображаются оценные книги в порядке убывания их рейтинга
- Базовые шаблоны отображения всех страниц с использованием библиотеки стилей bootstrap

### API
- Реализованы API endpoints для просмотра списка книг и детальной информации о книге с использованием Django Rest Framework.

### Тестирование
- Весь реализованный функционал покрыт юнит тестами
  - запуск тестов вне контейнера ```python manage.py test```
  - запуск тестов в контейнере ```docker exec -it __container_id__ python manage.py test```
- Автоматический запуск тестов в Github Actions

### Развертывание
- Приложение подготовленно для развертывания с использованием docker-compose: Django + Postgres + Gunicorn + Nginx
  - склонировать репозиторий ```git clone https://github.com/altengofso/library-project.git```
  - скорректировать под свои задачи переменные окружения (обязательно ```DEBUG```, ```SECRET_KEY``` и ```ALLOWED_HOSTS```)
    ```
    vim docker-compose.yml
    environment:
     - DEBUG=0
     - SECRET_KEY=
     - DJANGO_ALLOWED_HOSTS=
     - SQL_ENGINE=django.db.backends.postgresql
     - SQL_DATABASE=postgres
     - SQL_USER=postgres
     - SQL_PASSWORD=postgres
     - SQL_HOST=db
     - SQL_PORT=5432
     - DATABASE=postgres
     - TZ=Europe/Moscow
     - LANGUAGE_CODE=ru-ru
    ```
  - запустить приложение ```docker-compose run -d --build```
  - создать суперпользователя ```docker exec -it __container_id__ python manage.py createsuperuser```
